function animation(){$("#result").LoadingOverlay("show",{background:"rgba(220,220,220, 0.5)",imageColor:"#33a3dc"}),$("#result").LoadingOverlay("show"),$("#result").LoadingOverlay("hide",!0)}function initGif(a,e,t){superGif=new SuperGif({gif:document.getElementById(e),progressbar_height:10,progressbar_background_color:"rgba(255, 255, 255, 0.5)",progressbar_foreground_color:"#41b882"}),superGif.load_url(a,function(){t()})}function drawableGif(a,e){var t=a,r=t.width,n=t.height,i=(t.imgid,t.gifdata),o=(t.url,t.font),l=new GIF({workers:2,quality:10,workerScript:"/Static/js/gif.worker.js"}),s=document.createElement("canvas");s.width=r,s.height=n;for(var c=s.getContext("2d"),g=superGif.get_canvas(),d=1,u=superGif.get_length(),f=new Array(u),m=0;m<i.length;m++)for(var h=i[m].text,p=i[m].loc,v=i[m].page,w=v[0];w<v[1]+1;w++)f[w]=new Array(h,p);for(var k=0;k<f.length;k++)!function(a){superGif.move_to(a);var t="",i=0,s=0;f[a]&&(s=f[a][1][0],i=f[a][1][1],t=f[a][0]);var u=document.createElement("img");u.src=g.toDataURL("image/png",1),u.onload=function(){if(c.drawImage(u,0,0),c.font=o,c=drawMode(c),c.fillText(t,s,i),l.addFrame(c.getImageData(0,0,r,n),{copy:!0,delay:140}),c.clearRect(0,0,r,n),d>=superGif.get_length())return l.on("finished",function(a){var t=new FileReader;t.onload=function(a){e(a.target.result)},t.readAsDataURL(a)}),void l.render();d++}}(k)}function initGif2(a){var e=a,t=e.width,r=e.height,n=e.gifdata,i=e.font,o=new GIF({workers:2,quality:10,workerScript:"/Static/js/gif.worker.js"}),l=new SuperGif({gif:document.getElementById(imgid),progressbar_height:10,progressbar_background_color:"rgba(255, 255, 255, 0.5)",progressbar_foreground_color:"#41b882"});l.load_url(loadUrl,function(){var a=document.createElement("canvas");a.width=t,a.height=r;for(var e=a.getContext("2d"),s=l.get_canvas(),c=1,g=l.get_length(),d=new Array(g),u=0;u<n.length;u++)for(var f=n[u].text,m=n[u].loc,h=n[u].page,p=h[0];p<h[1]+1;p++)d[p]=new Array(f,m);console.log(d);for(var v=0;v<d.length;v++)!function(a){l.move_to(a);var n="",g=0,u=0;d[a]&&(u=d[a][1][0],g=d[a][1][1],n=d[a][0]);var f=document.createElement("img");f.src=s.toDataURL("image/png",1),f.onload=function(){if(e.drawImage(f,0,0),e.font=i,e.fillStyle="#FFFFFF",e.fillText(n,u,g),o.addFrame(e.getImageData(0,0,t,r),{copy:!0,delay:140}),e.clearRect(0,0,t,r),c>=l.get_length())return o.on("finished",function(a){var e=new FileReader;e.onload=function(a){$("#pic").attr("src",a.target.result)},e.readAsDataURL(a)}),void o.render();c++}}(v)})}function initImg(a,e,t,r){return canvasHeight=t,canvasWidth=e,canvaFont=r,c=document.createElement("canvas"),c.width=canvasWidth,c.height=canvasHeight,ctx=c.getContext("2d"),ctx=drawMode(ctx),ctx.drawImage(a,0,0),ctx}function drawCanvas(a){for(var e=0;e<a.length;e++)ctx.fillText(a[e].text,a[e].loc[0],a[e].loc[1]);try{return c.toDataURL("image/jpeg",1)}catch(a){return a}}function drawMode(a){return 1==$('input:radio[name="chutxt"]:checked').val()?a.font="bold "+canvaFont:a.font=canvaFont,0!=$('input:radio[name="shadow"]:checked').val()&&(a.shadowColor=$("#shdowcolor").val(),a.shadowOffsetX=$("#shadowposition").val(),a.shadowOffsetY=$("#shadowposition").val(),2==$('input:radio[name="shadow"]:checked').val()?a.shadowOffsetX=-$("#shadowposition").val():3==$('input:radio[name="shadow"]:checked').val()?a.shadowOffsetY=-$("#shadowposition").val():4==$('input:radio[name="shadow"]:checked').val()&&(a.shadowOffsetX=-$("#shadowposition").val(),a.shadowOffsetY=-$("#shadowposition").val()),a.shadowBlur=$("#shadowblur").val()),a.fillStyle=$("#colortext").val(),a}function pageCon(a){var e="";if(a.pageNumber>=a.totalPages){for(var t=1;t<a.totalPages+1;t++)e=t!=a.currentPage?'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>":'<li class="page-item active"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>";return e}if(a.pageNumber%2!=0){var r=(a.pageNumber-1)/2,n=a.currentPage-r,i=a.currentPage+r;n<1&&(i=i+1-n,n=1),i>a.totalPages&&(n=n+i-a.totalPages,i=a.totalPages);for(var t=n;t<a.currentPage;t++)e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>";e=e+'<li class="page-item  active"><a class="page-link" href="/Html/list-'+a.listId+"-"+a.currentPage+'.html">'+a.currentPage+"</a></li>";for(var t=a.currentPage+1;t<i+1;t++)e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>";return i<a.totalPages&&(e+='<li class="page-item"><a class="page-link"  onclick="return false;" >...</a></li>',e=e+'<li class="page-item"><a class="page-link"  href="/Html/list-'+a.listId+"-"+a.totalPages+'.html">'+a.totalPages+"</a></li>"),e}if(a.pageNumber%2==0){var r=(a.pageNumber-1-1)/2,n=a.currentPage-r,i=a.currentPage+r+1;n<1&&(i=i+1-n,n=1),i>a.totalPages&&(n=n+i-a.totalPages,i=a.totalPages);for(var t=n;t<a.currentPage;t++)e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>";e=e+'<li class="page-item  active"><a class="page-link" href="/Html/list-'+a.listId+"-"+a.currentPage+'">'+a.currentPage+"</a></li>";for(var t=a.currentPage+1;t<i+1;t++)e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>";return i<a.totalPages&&(e+='<li class="page-item"><a class="page-link"  onclick="return false;" >...</a></li>',e=e+'<li class="page-item"><a class="page-link"  href="/Html/list-'+a.listId+"-"+a.totalPages+'.html" >'+a.totalPages+"</a></li>"),e}return e}function pageMode(a){document.getElementById("pageMode").innerHTML=topText(a)+pageCon(a)+bottomText(a)}function topText(a){var e="";if(e+='<ul class="pagination">',a.currentPage-1>0){var t=a.currentPage-1;e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html"><</a></li>'}else e+='<li class="page-item"><a class="page-link" ><</a></li>';return e}function bottomText(a){var e="";if(a.currentPage+1<=a.totalPages){var t=a.currentPage+1;e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">></a></li>'}else e+='<li class="page-item"><a class="page-link" >></a></li>';return e+="</ul>"}var DomAnimator=function(){function a(a){return f?t(a):s(a.join("\n"))}function e(a){return f?t(a.split("\n")):s(a)}function t(a){var e=0;for(e;e<a.length;e++)a[e]=a[e].replace(/ /g,v);return a}function r(a){if(a||(a=h),0===d.length)return void console.log("I need frames to animate. You can add them with .addFrame( string )");!1===p&&i(),m=setInterval(function(){n()},a)}function n(){var a=d[g];if(f){var e=0;for(e;e<u.length;e++)u[e].nodeValue=a[e]}else u[0].nodeValue=a;(g+=1)===d.length&&(g=0)}function i(){var a=document.head,e=a.parentNode;if(f){var t=0,r=d[0].length;for(t;t<r;t++){var n=document.createComment("");u.push(n),e.insertBefore(n,a)}}else{var n=document.createComment("");u.push(n),e.insertBefore(n,a)}}function o(){clearInterval(m)}function l(t){t||(t="no frame data");var r=typeof t;"object"===r?d.push(a(t)):"string"===r&&d.push(e(t))}function s(a){return"\n"+a+"\n"}function c(){}var g=0,d=[],u=[],f=!window.chrome,m=null,h=500,p=!1,v=" ";return function(a,e){for(var t in e)t in a||(a[t]=e[t]);return a}(c,{addFrame:l,animate:r,stop:o})};$(function(){$("#shadowposition").ionRangeSlider({type:"single",hide_min_max:!0,from:3,to:3,min:0,max:10,step:1,grid:!0,grid_snap:!0}),$("#shadowblur").ionRangeSlider({type:"single",hide_min_max:!0,from:3,to:3,min:0,max:10,step:1,grid:!0,grid_snap:!0})}),$(function(){$("#shadowpicker").colorpicker({color:"rgba(0, 0, 0, 0.2)"}),$("#colorpicker").colorpicker({color:"#000000"})}),$("input[name='shadow']").bind("click",function(){0==$(this).val()?$("#shadowdiv").hide():$("#shadowdiv").show()}),$(function(){var a=new DomAnimator;a.addFrame("你为什么"),a.addFrame("要看源代码?"),a.addFrame("关注公众号: 世界极限挑战"),a.addFrame("回复 源代码 这三字,赠送源码git地址"),a.addFrame("哥哥你关注公众号,我就以身相许!让你日个够"),a.animate(1500)}),setTimeout(function(){NProgress.done()},1e3);var superGif,canvasHeight,canvasWidth,canvaFont,c,ctx;