function animation(){$("#result").LoadingOverlay("show",{background:"rgba(220,220,220, 0.5)",imageColor:"#33a3dc"}),$("#result").LoadingOverlay("show"),$("#result").LoadingOverlay("hide",!0)}function initImg(a,e,t,i){return canvasHeight=t,canvasWidth=e,canvaFont=i,c=document.createElement("canvas"),c.width=canvasWidth,c.height=canvasHeight,ctx=c.getContext("2d").getImageData(0,0,canvasWidth,canvasHeight),ctx=drawMode(ctx)}function drawCanvas(a){for(var e=0;e<a.length;e++)ctx.fillText(a[e].text,a[e].loc[0],a[e].loc[1]);try{return c.toDataURL("image/png",1)}catch(a){return a}}function drawMode(a){return 1==$('input:radio[name="chutxt"]:checked').val()?a.font="bold "+canvaFont:a.font=canvaFont,0!=$('input:radio[name="shadow"]:checked').val()&&(a.shadowColor=$("#shdowcolor").val(),a.shadowOffsetX=$("#shadowposition").val(),a.shadowOffsetY=$("#shadowposition").val(),2==$('input:radio[name="shadow"]:checked').val()?a.shadowOffsetX=-$("#shadowposition").val():3==$('input:radio[name="shadow"]:checked').val()?a.shadowOffsetY=-$("#shadowposition").val():4==$('input:radio[name="shadow"]:checked').val()&&(a.shadowOffsetX=-$("#shadowposition").val(),a.shadowOffsetY=-$("#shadowposition").val()),a.shadowBlur=$("#shadowblur").val()),a.fillStyle=$("#colortext").val(),a}function pageCon(a){var e="";if(a.pageNumber>=a.totalPages){for(var t=1;t<a.totalPages+1;t++)e=t!=a.currentPage?'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>":'<li class="page-item active"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>";return e}if(a.pageNumber%2!=0){var i=(a.pageNumber-1)/2,n=a.currentPage-i,l=a.currentPage+i;n<1&&(l=l+1-n,n=1),l>a.totalPages&&(n=n+l-a.totalPages,l=a.totalPages);for(var t=n;t<a.currentPage;t++)e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>";e=e+'<li class="page-item  active"><a class="page-link" href="/Html/list-'+a.listId+"-"+a.currentPage+'.html">'+a.currentPage+"</a></li>";for(var t=a.currentPage+1;t<l+1;t++)e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>";return l<a.totalPages&&(e+='<li class="page-item"><a class="page-link"  onclick="return false;" >...</a></li>',e=e+'<li class="page-item"><a class="page-link"  href="/Html/list-'+a.listId+"-"+a.totalPages+'.html">'+a.totalPages+"</a></li>"),e}if(a.pageNumber%2==0){var i=(a.pageNumber-1-1)/2,n=a.currentPage-i,l=a.currentPage+i+1;n<1&&(l=l+1-n,n=1),l>a.totalPages&&(n=n+l-a.totalPages,l=a.totalPages);for(var t=n;t<a.currentPage;t++)e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>";e=e+'<li class="page-item  active"><a class="page-link" href="/Html/list-'+a.listId+"-"+a.currentPage+'">'+a.currentPage+"</a></li>";for(var t=a.currentPage+1;t<l+1;t++)e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">'+t+"</a></li>";return l<a.totalPages&&(e+='<li class="page-item"><a class="page-link"  onclick="return false;" >...</a></li>',e=e+'<li class="page-item"><a class="page-link"  href="/Html/list-'+a.listId+"-"+a.totalPages+'.html" >'+a.totalPages+"</a></li>"),e}return e}function pageMode(a){document.getElementById("pageMode").innerHTML=topText(a)+pageCon(a)+bottomText(a)}function topText(a){var e="";if(e+='<ul class="pagination">',a.currentPage-1>0){var t=a.currentPage-1;e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html"><</a></li>'}else e+='<li class="page-item"><a class="page-link" ><</a></li>';return e}function bottomText(a){var e="";if(a.currentPage+1<=a.totalPages){var t=a.currentPage+1;e=e+'<li class="page-item"><a class="page-link" href="/Html/list-'+a.listId+"-"+t+'.html">></a></li>'}else e+='<li class="page-item"><a class="page-link" >></a></li>';return e+="</ul>"}var DomAnimator=function(){function a(a){return u?t(a):s(a.join("\n"))}function e(a){return u?t(a.split("\n")):s(a)}function t(a){var e=0;for(e;e<a.length;e++)a[e]=a[e].replace(/ /g,v);return a}function i(a){if(a||(a=f),0===g.length)return void console.log("I need frames to animate. You can add them with .addFrame( string )");!1===p&&l(),h=setInterval(function(){n()},a)}function n(){var a=g[d];if(u){var e=0;for(e;e<m.length;e++)m[e].nodeValue=a[e]}else m[0].nodeValue=a;(d+=1)===g.length&&(d=0)}function l(){var a=document.head,e=a.parentNode;if(u){var t=0,i=g[0].length;for(t;t<i;t++){var n=document.createComment("");m.push(n),e.insertBefore(n,a)}}else{var n=document.createComment("");m.push(n),e.insertBefore(n,a)}}function r(){clearInterval(h)}function o(t){t||(t="no frame data");var i=typeof t;"object"===i?g.push(a(t)):"string"===i&&g.push(e(t))}function s(a){return"\n"+a+"\n"}function c(){}var d=0,g=[],m=[],u=!window.chrome,h=null,f=500,p=!1,v=" ";return function(a,e){for(var t in e)t in a||(a[t]=e[t]);return a}(c,{addFrame:o,animate:i,stop:r})};$(function(){$("#shadowposition").ionRangeSlider({type:"single",hide_min_max:!0,from:3,to:3,min:0,max:10,step:1,grid:!0,grid_snap:!0}),$("#shadowblur").ionRangeSlider({type:"single",hide_min_max:!0,from:3,to:3,min:0,max:10,step:1,grid:!0,grid_snap:!0})}),$(function(){$("#shadowpicker").colorpicker({color:"rgba(0, 0, 0, 0.2)"}),$("#colorpicker").colorpicker({color:"#000000"})}),$("input[name='shadow']").bind("click",function(){0==$(this).val()?$("#shadowdiv").hide():$("#shadowdiv").show()}),$(function(){var a=new DomAnimator;a.addFrame("你为什么"),a.addFrame("要看源代码?"),a.addFrame("关注公众号: 世界极限挑战"),a.addFrame("回复 源代码 这三字,赠送源码git地址"),a.addFrame("哥哥你关注公众号,我就以身相许!让你日个够"),a.animate(1500)}),setTimeout(function(){NProgress.done()},1e3);var canvasHeight,canvasWidth,canvaFont,c,ctx;$("#build").click(function(){var a=new GIF({workers:2,quality:10,workerScript:"http://localhost:7777/Static/js/gif.worker.js"});ctx=initImg(document.getElementById("set"),300,216,"27px 'Microsoft Yahei'"),alert(ctx),a.addFrame(ctx,{copy:!0}),a.addFrame(ctx,{copy:!0}),a.on("finished",function(a){window.open(URL.createObjectURL(a))}),a.render()});