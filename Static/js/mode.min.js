function showLoad(){$("#result").LoadingOverlay("show",{background:"rgba(220,220,220, 0.5)",imageColor:"#33a3dc"}),$("#result").LoadingOverlay("show")}function hideLoad(){$("#result").LoadingOverlay("hide",!0),$("#download").show()}function measureText(e,a){return measureCtx.font=a,measureCtx.measureText(e).width}function half(e,a,t){return measureCtx.font=a,(t-measureCtx.measureText(e).width)/2}function GifMode(e){var a=e;GifCreate(a,function(){initGif=!0,runGif&&GifWork(a,getDataArr(),function(e){$("#set").attr("src",e),$("#download").attr("href",e),hideLoad()})}),$("#build").click(function(){if(showLoad(),!initGif)return void(runGif=!0);GifWork(a,getDataArr(),function(e){$("#set").attr("src",e),$("#download").attr("href",e),hideLoad()})})}function GifCreate(e,a){var t=e.load,r=e.imgid;superGif=new SuperGif({gif:document.getElementById(r),progressbar_height:10,progressbar_background_color:"rgba(255, 255, 255, 0.5)",progressbar_foreground_color:"#41b882"}),superGif.load_url(t,function(){a()})}function GifWork(e,a,t){function r(){superGif.move_to($);var e="",a=0,n=0;m[$]&&(n=m[$][1][0],a=m[$][1][1],e=m[$][0]);var d=document.createElement("img");d.src=g.toDataURL("image/png",1),d.onload=function(){u.drawImage(d,0,0),u.font=s,u=drawMode(u),u.fillText(e,n,a),c.addFrame(u.getImageData(0,0,i,o),{copy:!0,delay:l}),$++,$<m.length?r():(c.on("finished",function(e){t(URL.createObjectURL(e)),$=0}),c.render())}}var n=a,i=e.w,o=e.h,l=e.delay,s=e.font,c=new GIF({workers:2,quality:10,workerScript:"/Static/js/gif.worker.js"}),d=document.createElement("canvas");d.width=i,d.height=o;for(var u=d.getContext("2d"),g=superGif.get_canvas(),f=superGif.get_length(),m=new Array(f),h=0;h<n.length;h++)for(var p=n[h].text,v=n[h].loc,w=n[h].page,k=w[0]-1;k<w[1];k++)m[k]=new Array(p,v);var $=0;r()}function ImgMode(e){var a=e;$("#build").click(function(){showLoad(),$("#download").show(),ImgWork(a,getDataArr(),function(e){$("#set").attr("src",e),$("#download").attr("href",e),hideLoad()})})}function ImgWork(e,a,t){var r=e.h,n=e.w,i=e.font,o=(e.font,a),l=document.createElement("img");l.src=initobj.src,l.onload=function(){var e=document.createElement("canvas");e.width=n,e.height=r;var a=e.getContext("2d");a.drawImage(l,0,0),a.font=i,a=drawMode(a);for(var s=0;s<o.length;s++)a.fillText(o[s].text,o[s].loc[0],o[s].loc[1]);e.toBlob(function(e){var a=URL.createObjectURL(e);console.log(a),t(a)},"image/png",1)}}function initImg(e,a){var t=e,r=t.h,n=t.w,i=t.font;return c=document.createElement("canvas"),c.width=n,c.height=r,ctx=c.getContext("2d"),ctx.font=i,ctx=drawMode(ctx),ctx.drawImage(a,0,0),ctx}function drawCanvas(e){for(var a=0;a<e.length;a++)ctx.fillText(e[a].text,e[a].loc[0],e[a].loc[1]);try{return c.toDataURL("image/jpeg",1)}catch(e){return e}}function drawMode(e){return 1==$('input:radio[name="chutxt"]:checked').val()&&(e.font="bold "+e.font),0!=$('input:radio[name="shadow"]:checked').val()&&(e.shadowColor=$("#shdowcolor").val(),e.shadowOffsetX=$("#shadowposition").val(),e.shadowOffsetY=$("#shadowposition").val(),2==$('input:radio[name="shadow"]:checked').val()?e.shadowOffsetX=-$("#shadowposition").val():3==$('input:radio[name="shadow"]:checked').val()?e.shadowOffsetY=-$("#shadowposition").val():4==$('input:radio[name="shadow"]:checked').val()&&(e.shadowOffsetX=-$("#shadowposition").val(),e.shadowOffsetY=-$("#shadowposition").val()),e.shadowBlur=$("#shadowblur").val()),e.fillStyle=$("#colortext").val(),e}function pageCon(e){var a="";if(e.pageNumber>=e.totalPages){for(var t=1;t<e.totalPages+1;t++)a=t!=e.currentPage?'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>":'<li class="page-item active"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>";return a}if(e.pageNumber%2!=0){var r=(e.pageNumber-1)/2,n=e.currentPage-r,i=e.currentPage+r;n<1&&(i=i+1-n,n=1),i>e.totalPages&&(n=n+i-e.totalPages,i=e.totalPages);for(var t=n;t<e.currentPage;t++)a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>";a=a+'<li class="page-item  active"><a class="page-link" href="/Html/list-'+e.listId+"-"+e.currentPage+'.html">'+e.currentPage+"</a></li>";for(var t=e.currentPage+1;t<i+1;t++)a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>";return i<e.totalPages&&(a+='<li class="page-item"><a class="page-link"  onclick="return false;" >...</a></li>',a=a+'<li class="page-item"><a class="page-link"  href="/Html/list-'+e.listId+"-"+e.totalPages+'.html">'+e.totalPages+"</a></li>"),a}if(e.pageNumber%2==0){var r=(e.pageNumber-1-1)/2,n=e.currentPage-r,i=e.currentPage+r+1;n<1&&(i=i+1-n,n=1),i>e.totalPages&&(n=n+i-e.totalPages,i=e.totalPages);for(var t=n;t<e.currentPage;t++)a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>";a=a+'<li class="page-item  active"><a class="page-link" href="/Html/list-'+e.listId+"-"+e.currentPage+'">'+e.currentPage+"</a></li>";for(var t=e.currentPage+1;t<i+1;t++)a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>";return i<e.totalPages&&(a+='<li class="page-item"><a class="page-link"  onclick="return false;" >...</a></li>',a=a+'<li class="page-item"><a class="page-link"  href="/Html/list-'+e.listId+"-"+e.totalPages+'.html" >'+e.totalPages+"</a></li>"),a}return a}function pageMode(e){document.getElementById("pageMode").innerHTML=topText(e)+pageCon(e)+bottomText(e)}function topText(e){var a="";if(a+='<ul class="pagination">',e.currentPage-1>0){var t=e.currentPage-1;a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html"><</a></li>'}else a+='<li class="page-item"><a class="page-link" ><</a></li>';return a}function bottomText(e){var a="";if(e.currentPage+1<=e.totalPages){var t=e.currentPage+1;a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">></a></li>'}else a+='<li class="page-item"><a class="page-link" >></a></li>';return a+="</ul>"}var DomAnimator=function(){function e(e){return f?t(e):s(e.join("\n"))}function a(e){return f?t(e.split("\n")):s(e)}function t(e){var a=0;for(a;a<e.length;a++)e[a]=e[a].replace(/ /g,v);return e}function r(e){if(e||(e=h),0===u.length)return void console.log("I need frames to animate. You can add them with .addFrame( string )");!1===p&&i(),m=setInterval(function(){n()},e)}function n(){var e=u[d];if(f){var a=0;for(a;a<g.length;a++)g[a].nodeValue=e[a]}else g[0].nodeValue=e;(d+=1)===u.length&&(d=0)}function i(){var e=document.head,a=e.parentNode;if(f){var t=0,r=u[0].length;for(t;t<r;t++){var n=document.createComment("");g.push(n),a.insertBefore(n,e)}}else{var n=document.createComment("");g.push(n),a.insertBefore(n,e)}}function o(){clearInterval(m)}function l(t){t||(t="no frame data");var r=typeof t;"object"===r?u.push(e(t)):"string"===r&&u.push(a(t))}function s(e){return"\n"+e+"\n"}function c(){}var d=0,u=[],g=[],f=!window.chrome,m=null,h=500,p=!1,v=" ";return function(e,a){for(var t in a)t in e||(e[t]=a[t]);return e}(c,{addFrame:l,animate:r,stop:o})};$(function(){var e=new DomAnimator;e.addFrame("你为什么"),e.addFrame("要看源代码?"),e.addFrame("关注公众号: 世界极限挑战"),e.addFrame("回复 源代码 这三字,赠送源码git地址"),e.addFrame("哥哥你关注公众号,我就以身相许!让你日个够"),e.animate(1500)}),$(function(){$("#shadowposition").ionRangeSlider({type:"single",hide_min_max:!0,from:3,to:3,min:0,max:10,step:1,grid:!0,grid_snap:!0}),$("#shadowblur").ionRangeSlider({type:"single",hide_min_max:!0,from:3,to:3,min:0,max:10,step:1,grid:!0,grid_snap:!0})}),$(function(){$("#shadowpicker").colorpicker({color:"rgba(0, 0, 0, 0.2)"}),$("#colorpicker").colorpicker({color:"#000000"})}),$("input[name='shadow']").bind("click",function(){0==$(this).val()?$("#shadowdiv").hide():$("#shadowdiv").show()}),setTimeout(function(){NProgress.done()},1e3);var measureCanvas=document.createElement("canvas"),measureCtx=measureCanvas.getContext("2d"),runGif=!1,initGif=!1,superGif,c,ctx;