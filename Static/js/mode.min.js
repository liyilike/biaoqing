function showLoad(){$("#result").LoadingOverlay("show",{background:"rgba(220,220,220, 0.5)",imageColor:"#33a3dc"}),$("#result").LoadingOverlay("show")}function hideLoad(){$("#result").LoadingOverlay("hide",!0),$("#download").show()}function measureText(e,a){return measureCtx.font=a,measureCtx.measureText(e).width}function half(e,a,t){return measureCtx.font=a,(t-measureCtx.measureText(e).width)/2}function GifMode(e){GifCreate(e,function(){initGif=!0,runGif&&GifWork(getDataArr(),function(e){$("#setresult").html('<img src="'+e+'" id="set" />'),hideLoad()})}),$("#build").click(function(){if(showLoad(),!initGif)return void(runGif=!0);GifWork(getDataArr(),function(e){$("#setresult").html('<img src="'+e+'" id="set" />'),hideLoad()})})}function GifCreate(e,a){wGif=e.w,hGif=e.h;var t=e.load,r=e.imgid;fontGif=e.font,canvasGif=document.createElement("canvas"),canvasGif.width=wGif,canvasGif.height=hGif,superGif=new SuperGif({gif:document.getElementById(r),progressbar_height:10,progressbar_background_color:"rgba(255, 255, 255, 0.5)",progressbar_foreground_color:"#41b882"}),superGif.load_url(t,function(){a()})}function GifWork(e,a){for(var t=e,r=fontGif,i=new GIF({workers:2,quality:10,workerScript:"/Static/js/gif.worker.js"}),n=canvasGif.getContext("2d"),o=superGif.get_canvas(),l=1,s=superGif.get_length(),c=new Array(s),d=0;d<t.length;d++)for(var f=t[d].text,u=t[d].loc,g=t[d].page,m=g[0];m<g[1]+1;m++)c[m]=new Array(f,u);for(var h=0;h<c.length;h++)!function(e){superGif.move_to(e);var t="",s=0,d=0;c[e]&&(d=c[e][1][0],s=c[e][1][1],t=c[e][0]);var f=document.createElement("img");f.src=o.toDataURL("image/png",1),f.onload=function(){if(n.drawImage(f,0,0),n.font=r,n=drawMode(n),n.fillText(t,d,s),i.addFrame(n.getImageData(0,0,wGif,hGif),{copy:!0,delay:140}),n.clearRect(0,0,wGif,hGif),l>=superGif.get_length())return i.on("finished",function(e){var t=new FileReader;t.onload=function(e){a(e.target.result)},t.readAsDataURL(e)}),void i.render();l++}}(h)}function ImgMode(e){var a=e,t=document.createElement("img");t.src=a.src,$("#build").click(function(){showLoad(),$("#download").show();var e=ImgWork(t,a,getDataArr());$("#set").attr("src",e),$("#download").attr("href",e),hideLoad()})}function ImgWork(e,a,t){var r=a.h,i=a.w,n=a.font,o=t,l=e,s=document.createElement("canvas");s.width=i,s.height=r;var c=s.getContext("2d");c.drawImage(l,0,0),c.font=n,c=drawMode(c);for(var d=0;d<o.length;d++)c.fillText(o[d].text,o[d].loc[0],o[d].loc[1]);try{return s.toDataURL("image/png",1)}catch(e){return e}}function initImg(e,a){var t=e,r=t.h,i=t.w,n=t.font;return c=document.createElement("canvas"),c.width=i,c.height=r,ctx=c.getContext("2d"),ctx.font=n,ctx=drawMode(ctx),ctx.drawImage(a,0,0),ctx}function drawCanvas(e){for(var a=0;a<e.length;a++)ctx.fillText(e[a].text,e[a].loc[0],e[a].loc[1]);try{return c.toDataURL("image/jpeg",1)}catch(e){return e}}function drawMode(e){return 1==$('input:radio[name="chutxt"]:checked').val()&&(e.font="bold "+e.font),0!=$('input:radio[name="shadow"]:checked').val()&&(e.shadowColor=$("#shdowcolor").val(),e.shadowOffsetX=$("#shadowposition").val(),e.shadowOffsetY=$("#shadowposition").val(),2==$('input:radio[name="shadow"]:checked').val()?e.shadowOffsetX=-$("#shadowposition").val():3==$('input:radio[name="shadow"]:checked').val()?e.shadowOffsetY=-$("#shadowposition").val():4==$('input:radio[name="shadow"]:checked').val()&&(e.shadowOffsetX=-$("#shadowposition").val(),e.shadowOffsetY=-$("#shadowposition").val()),e.shadowBlur=$("#shadowblur").val()),e.fillStyle=$("#colortext").val(),e}function pageCon(e){var a="";if(e.pageNumber>=e.totalPages){for(var t=1;t<e.totalPages+1;t++)a=t!=e.currentPage?'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>":'<li class="page-item active"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>";return a}if(e.pageNumber%2!=0){var r=(e.pageNumber-1)/2,i=e.currentPage-r,n=e.currentPage+r;i<1&&(n=n+1-i,i=1),n>e.totalPages&&(i=i+n-e.totalPages,n=e.totalPages);for(var t=i;t<e.currentPage;t++)a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>";a=a+'<li class="page-item  active"><a class="page-link" href="/Html/list-'+e.listId+"-"+e.currentPage+'.html">'+e.currentPage+"</a></li>";for(var t=e.currentPage+1;t<n+1;t++)a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>";return n<e.totalPages&&(a+='<li class="page-item"><a class="page-link"  onclick="return false;" >...</a></li>',a=a+'<li class="page-item"><a class="page-link"  href="/Html/list-'+e.listId+"-"+e.totalPages+'.html">'+e.totalPages+"</a></li>"),a}if(e.pageNumber%2==0){var r=(e.pageNumber-1-1)/2,i=e.currentPage-r,n=e.currentPage+r+1;i<1&&(n=n+1-i,i=1),n>e.totalPages&&(i=i+n-e.totalPages,n=e.totalPages);for(var t=i;t<e.currentPage;t++)a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>";a=a+'<li class="page-item  active"><a class="page-link" href="/Html/list-'+e.listId+"-"+e.currentPage+'">'+e.currentPage+"</a></li>";for(var t=e.currentPage+1;t<n+1;t++)a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">'+t+"</a></li>";return n<e.totalPages&&(a+='<li class="page-item"><a class="page-link"  onclick="return false;" >...</a></li>',a=a+'<li class="page-item"><a class="page-link"  href="/Html/list-'+e.listId+"-"+e.totalPages+'.html" >'+e.totalPages+"</a></li>"),a}return a}function pageMode(e){document.getElementById("pageMode").innerHTML=topText(e)+pageCon(e)+bottomText(e)}function topText(e){var a="";if(a+='<ul class="pagination">',e.currentPage-1>0){var t=e.currentPage-1;a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html"><</a></li>'}else a+='<li class="page-item"><a class="page-link" ><</a></li>';return a}function bottomText(e){var a="";if(e.currentPage+1<=e.totalPages){var t=e.currentPage+1;a=a+'<li class="page-item"><a class="page-link" href="/Html/list-'+e.listId+"-"+t+'.html">></a></li>'}else a+='<li class="page-item"><a class="page-link" >></a></li>';return a+="</ul>"}var DomAnimator=function(){function e(e){return g?t(e):s(e.join("\n"))}function a(e){return g?t(e.split("\n")):s(e)}function t(e){var a=0;for(a;a<e.length;a++)e[a]=e[a].replace(/ /g,v);return e}function r(e){if(e||(e=h),0===f.length)return void console.log("I need frames to animate. You can add them with .addFrame( string )");!1===p&&n(),m=setInterval(function(){i()},e)}function i(){var e=f[d];if(g){var a=0;for(a;a<u.length;a++)u[a].nodeValue=e[a]}else u[0].nodeValue=e;(d+=1)===f.length&&(d=0)}function n(){var e=document.head,a=e.parentNode;if(g){var t=0,r=f[0].length;for(t;t<r;t++){var i=document.createComment("");u.push(i),a.insertBefore(i,e)}}else{var i=document.createComment("");u.push(i),a.insertBefore(i,e)}}function o(){clearInterval(m)}function l(t){t||(t="no frame data");var r=typeof t;"object"===r?f.push(e(t)):"string"===r&&f.push(a(t))}function s(e){return"\n"+e+"\n"}function c(){}var d=0,f=[],u=[],g=!window.chrome,m=null,h=500,p=!1,v=" ";return function(e,a){for(var t in a)t in e||(e[t]=a[t]);return e}(c,{addFrame:l,animate:r,stop:o})};$(function(){var e=new DomAnimator;e.addFrame("你为什么"),e.addFrame("要看源代码?"),e.addFrame("关注公众号: 世界极限挑战"),e.addFrame("回复 源代码 这三字,赠送源码git地址"),e.addFrame("哥哥你关注公众号,我就以身相许!让你日个够"),e.animate(1500)}),$(function(){$("#shadowposition").ionRangeSlider({type:"single",hide_min_max:!0,from:3,to:3,min:0,max:10,step:1,grid:!0,grid_snap:!0}),$("#shadowblur").ionRangeSlider({type:"single",hide_min_max:!0,from:3,to:3,min:0,max:10,step:1,grid:!0,grid_snap:!0})}),$(function(){$("#shadowpicker").colorpicker({color:"rgba(0, 0, 0, 0.2)"}),$("#colorpicker").colorpicker({color:"#000000"})}),$("input[name='shadow']").bind("click",function(){0==$(this).val()?$("#shadowdiv").hide():$("#shadowdiv").show()}),setTimeout(function(){NProgress.done()},1e3);var measureCanvas=document.createElement("canvas"),measureCtx=measureCanvas.getContext("2d"),superGif,canvasGif,fontGif,wGif,hGif,runGif=!1,initGif=!1,c,ctx;